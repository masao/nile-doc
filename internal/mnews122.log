script コマンドが 2001年04月27日 (金) 13時15分33秒 で起動されました。
chinatsu@nile[1]% config.jsh
--- Mini News Reader コンフィグレーションツール ---
これから幾つかの質問に答えて下さい。
例えば、'([y]/n)' で終る質問は単にリターンを叩けばデフォルトとして 'y' となります。

改行コードの扱いを調べています...
CR(RETURN)キーを押せば続きに進みます。ここにカーソルが見えれば-->
御使用のシステムのアーキテクチャは何ですか?
番号で選んで下さい。

1.SUN 4.X for SUN SUN-OS 4.X(Solaris 1.X)
              Solbourne OS-MP 4.X, Panasonic P-Series PanaOS/S 1.X
              Toshiba AS-Series OS/AS V4.X
2.SUN 3.X for SUN SUN-OS 3.X, Toshiba AS-Series OS/AS V3.X
3.DEC     for DECstation.(Ultrix 4.X)
4.NeXT    for NeXT series.(NeXT STEP 2.X)
5.NEWS    for NEWS series.(NEWS-OS 4.X)
6.BSD     for 386BSD, NetBSD, FreeBSD on PC-AT/PC-9801.
7.Linux   for Linux
8.LUNA    for LUNA series.(UNIOS-B 1.X/2.X/3.X/MACH 2.X),BSD 4.3
9.RS6000  for IBM RS6000(AIX 3.X)
10.HP     for HP-UX 8.X/9.X
11.ALPHA  for DEC ALPHA-AXP
12.SGI    for SGI IRIS Crimson,Indigo2,Indy IRIX 4.X/5.X
13.SVR4   for other System-V Release4.
              NEC EWS4800(EWS UX/V Rel4.X), UP4800(UP-UX/V)
              OKIstation, SUN SUN-OS 5.X(Solaris 2.X)...
Q.quit

アーキテクチャ番号:13
Is your system Solaris 2.X (or later)? (y/[n]):y

IPv6に対応しますか? (y/[n]):

実行ファイルインストールディレクトリ名を入力して下さい。
実行ファイルインストールディレクトリ(デフォルト:/usr/local/bin):


ライブラリインストールディレクトリ名を入力して下さい。
ライブラリインストールディレクトリ(デフォルト:/usr/local/lib):


マニュアルインストールディレクトリ名を入力して下さい。
マニュアルインストールディレクトリ(デフォルト:/usr/local/man):


作業ディレクトリ名を入力して下さい。
作業ディレクトリ(デフォルト:/var/tmp):


NNTP はニュースを参照するのに TCP/IP 通信を使用することを意味します。
NNTP モードをサポートしますか(NNTP)? ([y]/n):

NSPL はニュースを参照するのにニューススプールを参照することを意味します。
NSPL モードをサポートしますか(NSPL)? ([y]/n):

SMTP はメールを送信するのに TCP/IP 通信を使用することを意味します。
SMTP モードをサポートしますか(SMTP)? (y/[n]):

MTAP はメールを送信するのに MTA(sendmail) をパイプ起動することを意味します。
MTAP モードをサポートしますか(MTAP)? ([y]/n):

POP3 はメールを受信するのに TCP/IP 通信を使用することを意味します。
POP3 モードをサポートしますか(POP3)? (y/[n]):

MSPL はメールを受信するのにメールスプールを参照することを意味します。
MSPL モードをサポートしますか(MSPL)? ([y]/n):

ニューススプールディレクトリ名を入力して下さい。
ニューススプールディレクトリ(デフォルト:/usr/spool/news):

"/usr/spool/news" が見つかりません。
このエラーを無視しますか? ([y]/n):

ニュースライブラリディレクトリ名を入力して下さい。
ニュースライブラリディレクトリ(デフォルト:/usr/lib/news):

"/usr/lib/news" が見つかりません。
このエラーを無視しますか? ([y]/n):

メールスプールディレクトリ名を入力して下さい。
メールスプールディレクトリ(デフォルト:/var/mail):


ニュースを投稿する機能(NEWSPOST)を使用しますか? ([y]/n):
ニュースを投稿するプログラムとオプションを入力して下さい。
もし、ニュースサーバ上で使用しないなら無視してリターンを押して下さい。
ニュース投稿プログラムとオプション(デフォルト:/usr/lib/news/inews -h):

警告:"/usr/lib/news/inews" が見つかりません。
このエラーを無視しますか? ([y]/n):

メールを送信する機能(MAILSEND)を使用しますか? ([y]/n):
メールを送信するプログラムとオプションを入力して下さい。
メール送信プログラムとオプション(デフォルト:/usr/lib/sendmail -t -om -oi):


データベースによる日本語変換機能(JNAMES)を使用しますか? ([y]/n):
ハッシュアルゴリズム JNHASH モジュールは高速ですが、通常モジュールより
大量のメモリを消費します。
ハッシュアルゴリズムモジュール(JNHASH)を使用しますか? ([y]/n):
警告:JNAMES データベース "/usr/local/lib/jnames" が見つかりません。

MH モード(MH)を使用しますか? ([y]/n):
内蔵 MMH (MH のサブセット)を使用しますか? ([y]/n):

UCB-mail モード(UCBMAIL)を使用しますか? ([y]/n):

RMAIL モード(RMAIL)を使用しますか? ([y]/n):

BOARD (電子掲示板)モード(BOARD)を使用しますか? (y/[n]):

もし MIME をサポートすれば若干速度が低下します。
日本語ヘッダ,マルチパート選択,マルチメディア記事(MIME)を使用しますか? ([y]/n):
MPEG プレイヤーとオプションを入力して下さい。
MPEG プレイヤーとオプション(デフォルト:mpeg_play):


JPEG ビューアーとオプションを入力して下さい。
JPEG ビューアーとオプション(デフォルト:xv):
display

GIF ビューアーとオプションを入力して下さい。
GIF ビューアーとオプション(デフォルト:xv):
display

オーディオプレイヤーとオプションを入力して下さい。
オーディオプレイヤーとオプション(デフォルト:audioplay):


Post Script ビューアーとオプションを入力して下さい。
Post Script ビューアーとオプション(デフォルト:ghostview):



内蔵ページャー(PAGER)を使用しますか? ([y]/n):

内蔵ページャーを組み込んだ場合は -p オプションもしくは
設定ファイルで指定した時のみ外部ページャーが使用されます。
外部ページャープログラムとオプションを入力して下さい。
ページャープログラムとオプション(デフォルト:/usr/local/bin/less):


File carbon copy (FCC)機能を使用しますか? ([y]/n):

新着メールのチェックに郵便(YOUBIN)を使用しますか? (y/[n]):

もし termcap または terminfo をサポートすれば若干速度が低下します。
termcap (TERMCAP)を使用しますか? (y/[n]):
terminfo (TERMINFO)を使用しますか? (y/[n]):y
terminfo ライブラリを入力して下さい。(デフォルト:-ltermlib):


コンフィグレーションオプションを入力して下さい。
-DADD_DATE          Date: フィールドを送信前に追加します。
-DADD_HOSTNAME      ホスト名をドメイン名に追加します。
-DADD_HOSTPATH      ホスト名をパスフィールドに追加します。
-DADD_MESSAGE_ID    Message-ID を mnews が追加します。
-DBOARD_COUNT       .count ファイルを使用して高速化します。
-DBUILTIN_MMH       MH の代わりに 内蔵 MMH を使用します。
-DCOLOR             カラー画面表示をサポートします。
-DCOMPLETION        ファイルとフォルダ名補完をサポートします。
-DCTRL_L            ^L により改ページをサポートします。
-DDELETE_FIELD      news/mail送信時に未使用フィールドを削除します。
-DDISPLAY_CTRL      無効なコントロールコードを '^'+文字として可視化します。
-DEUC_SPOOL         ニュース/メールスプールに EUC コードを使用します。
-DIGNORE_EDITOR     エディタ終了コードを無視します。
-DINET6             RFC2553 システムの IPv6 をサポートします。
-DLARGE             拡張コマンドをサポートします。
-DLOCAL_POST        常時 inews を使用して投稿します。
-DMOUSE             kterm/xterm においてマウス操作をサポートします。
-DNNTP_AUTH         INN の認証機能に対応します。
-DRECOVER_SUBJECT   ESC 落ちした Subject を復活します。
-DREF_SORT          リファレンスソートをサポートします。
-DRESOLVE           レゾルバを使用します。
-DSELECT_EDITOR     記事を書く時にエディタを選択します。
-DSEND_CONFIRM      ニュース投稿/メール送信時に確認を求めます。
-DSJIS_SRC          mnews のソースコードに SHIFT-JIS を使用します。
-DSMALL             機能を制限してコンパクトにします。
-DSUPPORT_X0201     JIS-X0201 かな文字をサポートします。
-DTRI               TRI 探索木アルゴリズムを使用して高速化します。
-DUSE_FCNTL_LOCK    fcntl をメールスプールロックに使用します。
-DUSE_FLOCK         flock をメールスプールロックに使用します。
-DUSE_LOCK_FILE     .lock をメールスプールロックに使用します。
-DUSE_LONG_FNAME    DOS/X68K においてロングファイルネームを使用します。
-DUSE_NLINK         MH/BOARD モードでリンク数を使用して高速化します。
-DUSE_NNTP_DATE     NNTP DATE コマンドをニュースサーバチェックに使用します。
-DWIN32_CONSOLE     Win32 コンソールを端末制御に使用します。
-DWITHOUT_FOLDER_CREATE  MH folder コマンドが -create を持ちません。
-DXOVER             NNTP の XOVER を使用して高速化します。
オプション(デフォルト:-DCTRL_L -DCOMPLETION -DREF_SORT -DLARGE -DDISPLAY_CTRL -DBUILTIN_MMH):
-DCTRL_L -DCOMPLETION -DREF_SORT -DLARGE -DDISPLAY_CTRL -DBUILTIN_MMH -DCOLOR

ドメイン(MX)名を入力して下さい。(例:msr.mei.co.jp)
ドメイン名:
ulis.ac.jp

デフォルトの表示コードを選んで下さい。
1:無変換
2:JIS コード
3:SJIS コード
4:EUC コード
Kanji code ? (デフォルト:4):

デフォルトの判別不能時コードを選んで下さい。(重要ではないです)
1:無変換
2:JIS コード
3:SJIS コード
4:EUC コード
Kanji code ? (デフォルト:4):

デフォルトのセーブコードを選んで下さい。
1:無変換
2:JIS コード
3:SJIS コード
4:EUC コード
Kanji code ? (デフォルト:1):

デフォルトのエディットコードを選んで下さい。
1:無変換
2:JIS コード
3:SJIS コード
4:EUC コード
Kanji code ? (デフォルト:4):

もし日本語サブジェクトを許容していないサイトなら"無変換"を選んで下さい。
デフォルトのサブジェクト入力コードを選んで下さい。
1:無変換
2:JIS コード
3:SJIS コード
4:EUC コード
Kanji code ? (デフォルト:1):

デフォルトの FCC コードを選んで下さい。
1:無変換
2:JIS コード
3:SJIS コード
4:EUC コード
Kanji code ? (デフォルト:1):

デフォルトのパイプコードを選んで下さい。
1:無変換
2:JIS コード
3:SJIS コード
4:EUC コード
Kanji code ? (デフォルト:1):

デフォルトの印刷コードを選んで下さい。
1:無変換
2:JIS コード
3:SJIS コード
4:EUC コード
Kanji code ? (デフォルト:1):

デフォルトの印刷コマンドとオプションを入力して下さい。
印刷コマンドとオプション(デフォルト:lpr):
lp

NNTP モードはニュースアクセス時にニューススプールを参照する代わりに TCP/IP 通信を使用することを意味しています。
もしあなたのマシンがニュースサーバでないなら 'Y' と答えて下さい。
デフォルトでは、NNTP モード(NNTP_MODE)を使用しますか? ([y]/n):

SMTP モードはメール送信時に MTA をパイプ起動する代わりに TCP/IP 通信を使用することを意味しています。
もしあなたのマシンが MTA(sendmail) を持っていないなら 'Y' と答えて下さい。
デフォルトでは、SMTP モード(SMTP_MODE)を使用しますか? (y/[n]):

POP3 モードはメール受信時にメールスプールを参照する代わりに TCP/IP 通信を使用することを意味しています。
もしあなたのマシンがメールスプールを持っていないなら 'Y' と答えて下さい。
デフォルトでは、POP3 モード(POP3_MODE)を使用しますか? (y/[n]):

デフォルトでは、日本語メッセージ(JAPANESE_MODE)モードにしますか? ([y]/n):

もし X-Nsubject フィールド対応にすれば日本語サブジェクトがニュース/メールシステムの変更なしで送受信できます。
デフォルトでは、X-Nsubject フィールド(X_NSUBJ_MODE)対応にしますか? (y/[n]):

NSPL モードでは mnews は inews を使用して記事の投稿を行ないます。
もし inews が自動的に signature を追加するなら mnews 側で signature をつけてはいけません。
ニュース投稿プログラム(inews)は、自動的に signature を追加(INEWS_SIG_MODE)しますか? ([y]/n):

デフォルトでは、日付を日本時間で表示しますか? ([y]/n):

DNAS モードでは mnews は無効なニュースグループを自動削除しません。
デフォルトでは、DNAS モードをサポートしますか? (y/[n]):

コンパイラプログラムを入力して下さい。
コンパイラ(デフォルト:/bin/cc):
/opt/SUNWspro/bin/cc

コンパイラの(最適化)オプションを入力して下さい。
オプション(デフォルト:-O -DDONT_HAVE_FTIME -DUSE_TZNAME -DUSE_TERMIOS -DNEED_FFLUSH -DNEED_LNEXT):


デフォルトで使用するエディタとオプションを入力して下さい。
エディタとオプション(デフォルト:/usr/local/bin/emacs -nw):


ターゲットアーキテクチャ         = SVR4
ターゲットネットワークオプション =  -DNNTP -DNSPL -DMTAP -DMSPL
ターゲット構成オプション         = -DNEWSPOST -DMAILSEND -DJNAMES -DMH -DUCBMAIL -DRMAIL -DMIME -DPAGER -DFCC -DTERMINFO
ターゲット設定オプション         = -DCTRL_L -DCOMPLETION -DREF_SORT -DLARGE -DDISPLAY_CTRL -DBUILTIN_MMH -DCOLOR
高速モジュールオプション         =  -DJNHASH
ドメイン名                       = "ulis.ac.jp"
以上であっていますか? ([y]/n):

コンフィグレーションファイルを作成しています。
"Makefile.src" を使います。
"temp.c", line 28: invalid input token: 1.22PL5
cc: acomp failed for temp.c
設定は終了しました。"Makefile" と "site_dep.h" を確かめて下さい。
確かめ終ったら実行ファイルを作成するために "make" とタイプして下さい。
chinatsu@nile[2]% less M^[akefile[?5h[?5l
[42;1H[K# 1 "temp.c"
 
# 5

# 11

SHELL           = /bin/sh
ARCH            = SVR4
WHEN            = date
WHO             = whoami
WHERE           = hostname
CC              = /opt/SUNWspro/bin/cc
LIBS            = -lsocket -lnsl -ltermlib
RANLIB          = true
INSTALL         = 
CC_FLAG         = -O -DDONT_HAVE_FTIME -DUSE_TZNAME -DUSE_TERMIOS -DNEED_FFLUSH -DNEED_LNEXT
BIN_DIR         = /usr/local/bin
LIB_DIR         = /usr/local/lib
MAN_DIR         = /usr/local/man
STRIP           = strip
 # STRIP                = echo

VERSION         =  1.22PL5
NET_OPT         =  -DNNTP -DNSPL -DMTAP -DMSPL
CONS_OPT        = -DNEWSPOST -DMAILSEND -DJNAMES -DMH -DUCBMAIL -DRMAIL -DMIME -DPAGER -DFCC -DTERMINFO
CONF_OPT        = -DCTRL_L -DCOMPLETION -DREF_SORT -DLARGE -DDISPLAY_CTRL -DBUILTIN_MMH -DCOLOR
MOD_OPT         =  -DJNHASH
SRC_DIR         = ../src
COMPAT_DIR      = ../compat
TCP_DIR         = ../tcplib
NNTP_DIR        = ../nntplib
SMTP_DIR        = ../smtplib
POP3_DIR        = ../pop3lib
KANJI_DIR       = ../kanjilib
TERM_DIR        = ../termlib
MIME_DIR        = ../mimelib
DOC_DIR         = ../doc
ETC_DIR         = ../etc
BUILD_DIR       = ../build
ARC_DIR         = mnews-${VERSION}
INC_FLAG        = -I. -I${COMPAT_DIR} -I${TCP_DIR}              -I${NNTP_DIR} -I${SMTP_DIR} -I${POP3_DIR}  
[42;1H[K[2;7mMakefile[22;27m[42;1H[42;1H[K                -I${KANJI_DIR} -I${MIME_DIR} -I${TERM_DIR} -I${SRC_DIR}
# 49
CPP_FLAG1       = ${INC_FLAG} -DMNEWS -DJIS_INPUT ${CONF_OPT} -D${ARCH}
CPP_FLAG2       = ${CONS_OPT} ${CPP_FLAG1}
C_FLAG1         = ${CPP_FLAG1} ${CC_FLAG}
C_FLAG2         = ${CPP_FLAG2} ${CC_FLAG}
RM              = rm
RM_FLAG         = -f
EXE             = mnews

# 58
NEWSPOST_OBJ    = newspost.o
# 61
MAILSEND_OBJ    = mailsend.o
# 65
JNAMES_OBJ      = jnhash.o
# 71
MH_OBJ          = mh.o
# 74
UCBMAIL_OBJ     = ucbmail.o
# 77
RMAIL_OBJ       = rmail.o
# 83
PAGER_OBJ       = pager.o
# 86
FCC_OBJ         = fcc.o
# 89
MIME_OBJ        = mimepart.o mimelib.o
# 94
BASE_OBJ        = mnews.o group.o article.o mark.o compat.o             tcplib.o nntplib.o smtplib.o pop3li
b.o kanjilib.o termlib.o
# 96
OPT_OBJ         = ${NEWSPOST_OBJ} ${MAILSEND_OBJ} ${JNAMES_OBJ}                 ${MH_OBJ} ${UCBMAIL_OBJ} ${
RMAIL_OBJ} ${BOARD_OBJ}                 ${PAGER_OBJ} ${FCC_OBJ} ${MIME_OBJ}             ${YOUBIN_OBJ}
# 100
OBJ             = ${BASE_OBJ} ${OPT_OBJ}
C_OBJ           = config.o
COMPAT_INC      = ${COMPAT_DIR}/compat.h
COMPAT_SRC      = ${COMPAT_DIR}/compat.c
TCP_INC         = ${TCP_DIR}/field.h            ${TCP_DIR}/tcplib.h             ${TCP_DIR}/inetbios.h
# 107
[42;1H[K:[42;1H[42;1H[KTCP_SRC         = ${TCP_DIR}/tcplib.c           ${TCP_DIR}/inetbios.c
# 109
NNTP_INC        = ${NNTP_DIR}/nntplib.h
NNTP_SRC        = ${NNTP_DIR}/nntplib.c
SMTP_INC        = ${SMTP_DIR}/smtplib.h
SMTP_SRC        = ${SMTP_DIR}/smtplib.c
POP3_INC        = ${POP3_DIR}/pop3lib.h
POP3_SRC        = ${POP3_DIR}/pop3lib.c
KANJI_INC       = ${KANJI_DIR}/kanjilib.h
 
KANJI_SRC       = ${KANJI_DIR}/kanjilib.c
 
TERM_INC        = ${TERM_DIR}/termlib.h
TERM_SRC        = ${TERM_DIR}/termlib.c                 ${TERM_DIR}/termdos.c
# 122
MIME_INC        = ${MIME_DIR}/mimelib.h
MIME_SRC        = ${MIME_DIR}/mimelib.c
SRC             = ${COMPAT_SRC}                 ${TCP_SRC}              ${NNTP_SRC}             ${SMTP_SRC}
                ${POP3_SRC}             ${KANJI_SRC}            ${TERM_SRC}             ${MIME_SRC}        
        ${SRC_DIR}/mnews.c              ${SRC_DIR}/group.c              ${SRC_DIR}/article.c            ${S
RC_DIR}/mark.c          ${SRC_DIR}/mh.c                 ${SRC_DIR}/ucbmail.c            ${SRC_DIR}/rmail.c 
                ${SRC_DIR}/board.c              ${SRC_DIR}/newspost.c           ${SRC_DIR}/mailsend.c      
        ${SRC_DIR}/pager.c              ${SRC_DIR}/fcc.c                ${SRC_DIR}/mimepart.c           ${S
RC_DIR}/jnames.c                ${SRC_DIR}/jnhash.c             ${SRC_DIR}/youbin.c
# 148
INC             = ${COMPAT_INC}                 ${TCP_INC}              ${NNTP_INC}             ${SMTP_INC}
                ${POP3_INC}             ${KANJI_INC}            ${TERM_INC}             ${MIME_INC}        
        ${SRC_DIR}/mnews.h              ${SRC_DIR}/group.h              ${SRC_DIR}/article.h            ${S
RC_DIR}/mark.h          ${SRC_DIR}/mh.h                 ${SRC_DIR}/ucbmail.h            ${SRC_DIR}/rmail.h 
                ${SRC_DIR}/board.h              ${SRC_DIR}/newspost.h           ${SRC_DIR}/mailsend.h      
        ${SRC_DIR}/pager.h              ${SRC_DIR}/fcc.h                ${SRC_DIR}/mimepart.h           ${B
UILD_DIR}/site_Be.h             ${BUILD_DIR}/site_DOS.h                 ${BUILD_DIR}/site_WIN.h            
        ${BUILD_DIR}/site_X68.h
# 173
C_SRC           = ${SRC_DIR}/config.c
C_INC           = ${SRC_DIR}/config.h
SITE            = ${BUILD_DIR}/site_dep.h
DOC1            = ${DOC_DIR}/mnews.doc          ${DOC_DIR}/mnews.1              ${DOC_DIR}/read1ST.doc     
        ${DOC_DIR}/readme.doc           ${DOC_DIR}/update.doc           ${DOC_DIR}/FAQ.doc              ${D
OC_DIR}/IPv6.doc                ${DOC_DIR}/IPv6_en.doc          ${DOC_DIR}/board.doc            ${DOC_DIR}/
present.doc             ${DOC_DIR}/gnspool.doc          ${DOC_DIR}/year2000.doc                 ${DOC_DIR}/
[42;1H[K:[42;1H[42;1H[Kyoubin.doc
# 189
DOC2            = ${DOC_DIR}/prerel.doc
ETC             = ${ETC_DIR}/board.sh           ${ETC_DIR}/board.csh            ${ETC_DIR}/combine.sh      
        ${ETC_DIR}/_mnews.smp           ${ETC_DIR}/"nemacs-3.3.2.patch"                 ${ETC_DIR}/"mule-2.
3@19.28.patch"          ${ETC_DIR}/kterm-color.termcap          ${ETC_DIR}/kterm-color.terminfo            
        ${ETC_DIR}/jnames.smp           ${ETC_DIR}/jnames.fj            ${ETC_DIR}/jnames.jp            ${E
TC_DIR}/jnames.tnn
# 202
INFO            = inst_inf.h
MAKE1           = convert.bat config.sh config.jsh Makefile.obj
MAKE2           = Makefile.src Makefile.MSC Makefile.GCC Makefile.X68           Makefile.TCC Makefile.B16 M
akefile.B32 Makefile.OS2                Makefile.VS6 Makefile.Be
# 207
SRC_DIST        = mnews_src.tar
OBJ_DIST        = mnews_${ARCH}_obj.tar
EXE_DIST        = mnews_${ARCH}_exe.tar

all: ${EXE}

obj: ${OBJ}

${EXE}: ${BASE_OBJ} ${OPT_OBJ} ${C_OBJ}
        ${CC} ${CC_FLAG} -o $@ ${BASE_OBJ} ${OPT_OBJ} ${C_OBJ} ${LIBS}
        ${STRIP} $@
        chmod 755 $@
        chmod 644 ${DOC1} ${DOC2}

.c.o: ${INC}
        ${CC} ${C_FLAG2} -c $*.c

${C_OBJ}: ${C_SRC} ${C_INC} ${SITE} ${INFO}
        ${CC} ${C_FLAG2} ${NET_OPT} -c ${C_SRC}

${INFO}: ${C_SRC} ${C_INC} ${SITE} ${SRC} ${INC}
        -${RM} ${RM_FLAG} ${INFO}
        @echo "Making "'"'${INFO}'"'
        touch ${INFO}
        @echo "/*"                                         >> ${INFO}
        @echo " * Mini News Reader Install Information"    >> ${INFO}
        @echo " */"                                        >> ${INFO}
[42;1H[K:[42;1H[42;1H[K        @echo ""                                           >> ${INFO}
        @echo "#define  NET_OPT "'"'${NET_OPT}'"'          >> ${INFO}
        @echo "#define  CONS_OPT        "'"'${CONS_OPT}'"' >> ${INFO}
        @echo "#define  CONF_OPT        "'"'${CONF_OPT}'"' >> ${INFO}
        @echo "#define  ARCH_OPT        "'"'${ARCH}'"'     >> ${INFO}
        @echo "#define  INSTALL_HOST    "'"'`${WHERE}`'"'  >> ${INFO}
        @echo "#define  INSTALL_USER    "'"'`${WHO}`'"'    >> ${INFO}
        @echo "#define  INSTALL_DATE    "'"'`${WHEN}`'"'   >> ${INFO}

${SITE}:
        @echo "You must run config.sh or config.jsh first."

compat.o: ${COMPAT_INC} ${COMPAT_DIR}/compat.c
        ${CC} ${C_FLAG2} -c ${COMPAT_DIR}/compat.c

tcplib.o: ${COMPAT_INC} ${TCP_INC} ${TCP_DIR}/tcplib.c
        ${CC} ${C_FLAG1} ${NET_OPT} -c ${TCP_DIR}/tcplib.c

nntplib.o: ${COMPAT_INC} ${TCP_INC} ${NNTP_INC} ${NNTP_DIR}/nntplib.c
        ${CC} ${C_FLAG1} ${NET_OPT} -c ${NNTP_DIR}/nntplib.c

smtplib.o: ${COMPAT_INC} ${TCP_INC} ${SMTP_INC} ${SMTP_DIR}/smtplib.c
        ${CC} ${C_FLAG1} ${NET_OPT} -c ${SMTP_DIR}/smtplib.c

pop3lib.o: ${COMPAT_INC} ${TCP_INC} ${POP3_INC} ${POP3_DIR}/pop3lib.c
        ${CC} ${C_FLAG1} ${NET_OPT} -c ${POP3_DIR}/pop3lib.c

 
# 265

kanjilib.o: ${COMPAT_INC} ${KANJI_INC} ${KANJI_DIR}/kanjilib.c
        ${CC} ${C_FLAG1} -DDELETE_X0212 -c ${KANJI_DIR}/kanjilib.c

 
# 273

termlib.o: ${COMPAT_INC} ${TERM_INC} ${TERM_DIR}/termlib.c
        ${CC} ${C_FLAG2} -c ${TERM_DIR}/termlib.c

mimelib.o: ${COMPAT_INC} ${MIME_INC} ${MIME_DIR}/mimelib.c
        ${CC} ${C_FLAG2} -c ${MIME_DIR}/mimelib.c
[42;1H[K:[42;1H[42;1H[K
jnames.o: ${SRC_DIR}/jnames.c
        ${CC} ${C_FLAG2} -c ${SRC_DIR}/jnames.c

jnhash.o: ${COMPAT_INC} ${KANJI_INC} ${SRC_DIR}/jnhash.c
        ${CC} ${C_FLAG2} -c ${SRC_DIR}/jnhash.c

youbin.o: ${INC} ${SRC_DIR}/youbin.c
        ${CC} ${C_FLAG2} -c ${SRC_DIR}/youbin.c

mnews.o: ${INC} ${SRC_DIR}/mnews.c
        ${CC} ${C_FLAG2} -c ${SRC_DIR}/mnews.c

group.o: ${INC} ${SRC_DIR}/group.c
        ${CC} ${C_FLAG2} -c ${SRC_DIR}/group.c

article.o: ${INC} ${SRC_DIR}/article.c
        ${CC} ${C_FLAG2} -c ${SRC_DIR}/article.c

mark.o: ${INC} ${SRC_DIR}/mark.c
        ${CC} ${C_FLAG2} -c ${SRC_DIR}/mark.c

mh.o: ${INC} ${SRC_DIR}/mh.c
        ${CC} ${C_FLAG2} -c ${SRC_DIR}/mh.c

ucbmail.o: ${INC} ${SRC_DIR}/ucbmail.c
        ${CC} ${C_FLAG2} -c ${SRC_DIR}/ucbmail.c

rmail.o: ${INC} ${SRC_DIR}/rmail.c
        ${CC} ${C_FLAG2} -c ${SRC_DIR}/rmail.c

board.o: ${INC} ${SRC_DIR}/board.c
        ${CC} ${C_FLAG2} -c ${SRC_DIR}/board.c

newspost.o: ${INC} ${SRC_DIR}/newspost.c
        ${CC} ${C_FLAG2} -c ${SRC_DIR}/newspost.c

mailsend.o: ${INC} ${SRC_DIR}/mailsend.c
        ${CC} ${C_FLAG2} -c ${SRC_DIR}/mailsend.c

pager.o: ${INC} ${SRC_DIR}/pager.c
[42;1H[K:[42;1H[42;1H[K        ${CC} ${C_FLAG2} -c ${SRC_DIR}/pager.c

fcc.o: ${INC} ${SRC_DIR}/fcc.c
        ${CC} ${C_FLAG2} -c ${SRC_DIR}/fcc.c

mimepart.o: ${INC} ${SRC_DIR}/mimepart.c
        ${CC} ${C_FLAG2} -c ${SRC_DIR}/mimepart.c

install: all
        cp ${EXE} ${BIN_DIR}
        chmod 755 ${BIN_DIR}/${EXE}
        @if [ -f default-domain ] ; then                cp default-domain ${LIB_DIR} ;          chmod 644 $
{LIB_DIR}/default-domain ;      fi
# 335
        @if [ -f "/sbin/i860" ] ; then          "/sbin/i860" ;          if [ $? -eq 0 ]; then              
        echo "Change group & permission." ;                     chgrp mail ${BIN_DIR}/${EXE} ;             
        chmod g+s ${BIN_DIR}/${EXE} ;           fi ;    fi
# 343
        @if [ -d ${MAN_DIR}/japanese/man1 ] ; then              cp ${DOC_DIR}/mnews.1 ${MAN_DIR}/japanese/m
an1 ;           chmod 644 ${MAN_DIR}/japanese/man1/mnews.1 ;    fi
# 347
        @if [ -d ${MAN_DIR}/man1 ] ; then               cp ${DOC_DIR}/mnews.1 ${MAN_DIR}/man1 ;            
        chmod 644 ${MAN_DIR}/man1/mnews.1 ;     fi
# 351

help:
        @echo "--- Mini News Reader Makefile [Source Version] ---"
        @echo "make          --- make executable file"
        @echo "make install  --- install executable & manual file"
        @echo "make clean    --- remove backup & object file"
        @echo "make dist-clean - clean-up to distributed state"
        @echo "make remove   --- remove object file"
        @echo "make help     --- print help message"
        @echo "make src_dist --- archive source & document file"
        @echo "make obj_dist --- archive object & document file"
        @echo "make bin_dist --- archive executable & document file"

dist-clean: clean
        -${RM} ${RM_FLAG} Y_or_n y_or_N K_code whoami.sh default-domain site_dep.h Makefile

clean:
[42;1H[K:[42;1H[42;1H[K        -${RM} ${RM_FLAG} ${EXE} ${OBJ} ${C_OBJ} ${INFO} *~ \#* *\#

remove:
        -${RM} ${RM_FLAG} ${EXE} ${OBJ} ${C_OBJ} ${INFO}

src_dist:
        (cd ../.. ; tar cvfh ${SRC_DIST}                ${ARC_DIR}/build/Makefile.*             ${ARC_DIR}/
build/site_*.h          ${ARC_DIR}/build/config.sh              ${ARC_DIR}/build/config.jsh             ${A
RC_DIR}/build/convert.bat               ${ARC_DIR}/compat ${ARC_DIR}/doc ${ARC_DIR}/etc                 ${A
RC_DIR}/kanjilib ${ARC_DIR}/mimelib ${ARC_DIR}/termlib          ${ARC_DIR}/nntplib ${ARC_DIR}/smtplib ${ARC
_DIR}/pop3lib           ${ARC_DIR}/tcplib ${ARC_DIR}/src ;      gzip -f ${SRC_DIST} )
# 385

obj_dist: ${OBJ}
        (cd ../.. ; tar cvfh ${OBJ_DIST}                ${ARC_DIR}/build/Makefile.obj           ${ARC_DIR}/
build/site_*.h          ${ARC_DIR}/build/config.sh              ${ARC_DIR}/build/config.jsh             ${A
RC_DIR}/build/mnews.o           ${ARC_DIR}/build/group.o                ${ARC_DIR}/build/article.o         
        ${ARC_DIR}/build/mark.o                 ${ARC_DIR}/build/compat.o               ${ARC_DIR}/build/tc
plib.o          ${ARC_DIR}/build/nntplib.o              ${ARC_DIR}/build/smtplib.o              ${ARC_DIR}/
build/pop3lib.o                 ${ARC_DIR}/build/kanjilib.o             ${ARC_DIR}/build/termlib.o         
        ${ARC_DIR}/build/newspost.o             ${ARC_DIR}/build/mailsend.o             ${ARC_DIR}/build/jn
ames.o          ${ARC_DIR}/build/jnhash.o               ${ARC_DIR}/build/mh.o           ${ARC_DIR}/build/uc
bmail.o                 ${ARC_DIR}/build/rmail.o                ${ARC_DIR}/build/board.o                ${A
RC_DIR}/build/pager.o           ${ARC_DIR}/build/fcc.o          ${ARC_DIR}/build/mimelib.o              ${A
RC_DIR}/compat/compat.h                 ${ARC_DIR}/doc ${ARC_DIR}/etc           ${ARC_DIR}/termlib/termlib.
h               ${ARC_DIR}/src/config.[ch] ;    gzip -f ${OBJ_DIST} )
# 419

bin_dist: ${EXE}
        (cd ../.. ; tar cvfh ${EXE_DIST}                ${ARC_DIR}/doc ${ARC_DIR}/etc           ${ARC_DIR}/
build/${EXE} ;  gzip -f ${EXE_DIST} )
# 425

touch:
        touch ${SRC} ${INC} ${C_SRC} ${C_INC} ${ETC}            ${DOC1} ${DOC2} ${MAKE1} ${MAKE2}
#ident "acomp: WorkShop Compilers 4.2 30 Oct 1996 C 4.2"
[42;1H[K[2;7m(END)[22;27m[42;1H[42;1H[K[42;1H[K[2;7m(END)[22;27m[42;1H[Kchinatsu@nile[3]% ls
K_code*          Makefile.VS6     config.sh*       mark.o           pager.o          tcplib.o
Makefile         Makefile.X68     convert.bat      mh.o             pop3lib.o        termlib.o
Makefile.B16     Makefile.obj     default-domain   mimelib.o        rmail.o          ucbmail.o
Makefile.B32     Makefile.src     fcc.o            mimepart.o       site_Be.h        whoami.sh*
Makefile.Be      Y_or_n*          group.o          mnews*           site_DOS.h       y_or_N*
Makefile.GCC     article.o        inst_inf.h       mnews.o          site_WIN.h
Makefile.MSC     compat.o         jnhash.o         mnews122.log     site_X68.h
Makefile.OS2     config.jsh*      kanjilib.o       newspost.o       site_dep.h
Makefile.TCC     config.o         mailsend.o       nntplib.o        smtplib.o
chinatsu@nile[4]% less sitedep.    _dep.h
[42;1H[K/*
 *
 *  System      : Mini News Reader
 *  Sub system  : Site depend define
 *  File        : site_dep.h
 *  Version     : 1.22
 *
 *  NOTE:
 *   This file made by config.sh program.
 *   If you want to change this file, please execute
 *   config.sh program again.
 *
 */

/*
 * If you define DOMAIN_NAME, DOMAIN_NAME used in
 * executable file, and DOMAIN_FILE does not need.
 */
/*
#define DOMAIN_NAME     "ulis.ac.jp"
*/
#define DEFAULT_INIT_FILE       "/usr/local/lib/mnews_setup"
#define DOMAIN_FILE             "/usr/local/lib/default-domain"
#define NNTP_SERVER_FILE        "/usr/local/lib/default-server"
#define SMTP_SERVER_FILE        "/usr/local/lib/default-smtpsv"
#define POP3_SERVER_FILE        "/usr/local/lib/default-pop3sv"
#define YOUBIN_SERVER_FILE      "/usr/local/lib/default-mailsv"
#define ORGAN_FILE              "/usr/lib/news/organization"

#define EXT_PAGER       "/usr/local/bin/less"
#define PRINT_CODE      EUC_CODE
#define DEFAULT_CODE    EUC_CODE
#define SAVE_CODE       ASCII_CODE
#define EDIT_CODE       EUC_CODE
#define INPUT_CODE      ASCII_CODE
#define FCC_CODE        ASCII_CODE
#define PIPE_CODE       ASCII_CODE
#define LPR_CODE        ASCII_CODE
#define EDITOR_COMMAND  "/usr/local/bin/emacs -nw"
#define SEND_COMMAND    "/usr/lib/sendmail -t -om -oi"
#define POST_COMMAND    "/usr/lib/news/inews -h"
[42;1H[K[2;7msite_dep.h[22;27m[42;1H[42;1H[K#define LPR_COMMAND     "lp"
#define MH_COMMAND_PATH ""
#define JNAMES_DB       "/usr/local/lib/jnames"
#define NEWS_SPOOL      "/usr/spool/news"
#define NEWS_LIB        "/usr/lib/news"
#define MAIL_SPOOL      "/var/mail"
#define BOARD_SPOOL     "/var/board"
#define TMP_DIR         "/var/tmp"

/*
 * MIME multimedia extension
 */

#define MPEG_COMMAND    "mpeg_play"
#define JPEG_COMMAND    "display"
#define GIF_COMMAND     "display"
#define AUDIO_COMMAND   "audioplay"
#define PS_COMMAND      "ghostview"

#define NNTP_MODE       1
#define SMTP_MODE       0
#define POP3_MODE       0
#define RPOP_MODE       0
#define JAPANESE        1
#define X_NSUBJ_MODE    0
#define INEWS_SIG_MODE  1
#define JST_MODE        1
#define DNAS_MODE       0
[42;1H[K[2;7m(END)[22;27m[42;1H[HM#define ORGAN_FILE              "/usr/lib/news/organization"
[42;1H[K:[42;1H[HM#define YOUBIN_SERVER_FILE      "/usr/local/lib/default-mailsv"
[42;1H[K:[42;1H[HM#define POP3_SERVER_FILE        "/usr/local/lib/default-pop3sv"
[42;1H[K:[42;1H[HM#define SMTP_SERVER_FILE        "/usr/local/lib/default-smtpsv"
[42;1H[K:[42;1H[HM#define NNTP_SERVER_FILE        "/usr/local/lib/default-server"
[42;1H[K:[42;1H[HM#define DOMAIN_FILE             "/usr/local/lib/default-domain"
[42;1H[K:[42;1H[HM#define DEFAULT_INIT_FILE       "/usr/local/lib/mnews_setup"
[42;1H[K:[42;1H[HM*/
[42;1H[K:[42;1H[HM#define DOMAIN_NAME     "ulis.ac.jp"
[42;1H[K:[42;1H[HM/*
[42;1H[K:[42;1H[HM */
[42;1H[K:[42;1H[HM * executable file, and DOMAIN_FILE does not need.
[42;1H[K:[42;1H[HM * If you define DOMAIN_NAME, DOMAIN_NAME used in
[42;1H[K:[42;1H[HM/*
[42;1H[K:[42;1H[HM
[42;1H[K:[42;1H[HM */
[42;1H[K:[42;1H[HM *
[42;1H[K:[42;1H[HM *   config.sh program again.
[42;1H[K:[42;1H[HM *   If you want to change this file, please execute
[42;1H[K:[42;1H[HM *   This file made by config.sh program.
[42;1H[K:[42;1H[HM *  NOTE:
[42;1H[K:[42;1H[HM *
[42;1H[K:[42;1H[HM *  Version     : 1.22
[42;1H[K:[42;1H[HM *  File        : site_dep.h
[42;1H[K:[42;1H[HM *  Sub system  : Site depend define
[42;1H[K:[42;1H[42;1H[K#define NEWS_SPOOL      "/usr/spool/news"
#define NEWS_LIB        "/usr/lib/news"
#define MAIL_SPOOL      "/var/mail"
#define BOARD_SPOOL     "/var/board"
#define TMP_DIR         "/var/tmp"

/*
 * MIME multimedia extension
 */

#define MPEG_COMMAND    "mpeg_play"
#define JPEG_COMMAND    "display"
#define GIF_COMMAND     "display"
#define AUDIO_COMMAND   "audioplay"
#define PS_COMMAND      "ghostview"

#define NNTP_MODE       1
#define SMTP_MODE       0
#define POP3_MODE       0
#define RPOP_MODE       0
#define JAPANESE        1
#define X_NSUBJ_MODE    0
#define INEWS_SIG_MODE  1
#define JST_MODE        1
#define DNAS_MODE       0
[42;1H[K[2;7m(END)[22;27m[42;1H[42;1H[K[42;1H[K[2;7m(END)[22;27m[42;1H[Kchinatsu@nile[5]% sudo make install
Password:
rm -f inst_inf.h
Making "inst_inf.h"
touch inst_inf.h
/opt/SUNWspro/bin/cc -DNEWSPOST -DMAILSEND -DJNAMES -DMH -DUCBMAIL -DRMAIL -DMIME -DPAGER -DFCC -DTERMINFO -I. -I../compat -I../tcplib 		-I../nntplib -I../smtplib -I../pop3lib 		-I../kanjilib -I../mimelib -I../termlib -I../src -DMNEWS -DJIS_INPUT -DCTRL_L -DCOMPLETION -DREF_SORT -DLARGE -DDISPLAY_CTRL -DBUILTIN_MMH -DCOLOR -DSVR4 -O -DDONT_HAVE_FTIME -DUSE_TZNAME -DUSE_TERMIOS -DNEED_FFLUSH -DNEED_LNEXT -DNNTP -DNSPL -DMTAP -DMSPL -c ../src/config.c
/opt/SUNWspro/bin/cc -O -DDONT_HAVE_FTIME -DUSE_TZNAME -DUSE_TERMIOS -DNEED_FFLUSH -DNEED_LNEXT -o mnews mnews.o group.o article.o mark.o compat.o 		tcplib.o nntplib.o smtplib.o pop3lib.o kanjilib.o termlib.o newspost.o mailsend.o jnhash.o 		mh.o ucbmail.o rmail.o  		pager.o fcc.o mimepart.o mimelib.o 		 config.o -lsocket -lnsl -ltermlib
strip mnews
chmod 755 mnews
chmod 644 ../doc/mnews.doc 		../doc/mnews.1 		../doc/read1ST.doc 		../doc/readme.doc 		../doc/update.doc 		../doc/FAQ.doc 		../doc/IPv6.doc 		../doc/IPv6_en.doc 		../doc/board.doc 		../doc/present.doc 		../doc/gnspool.doc 		../doc/year2000.doc 		../doc/youbin.doc ../doc/prerel.doc
cp mnews /usr/local/bin
chmod 755 /usr/local/bin/mnews
chinatsu@nile[6]% ^D
script コマンドが 2001年04月27日 (金) 13時29分08秒 で終了しました。 
