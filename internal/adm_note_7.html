<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=EUC-JP">
<link rel="stylesheet" href="../style.css" type="text/css">
<link rev="made" href="mailto:admin@nile.ulis.ac.jp">
<title>nile管理ノート(1999年12月5日〜）</title>
</head>
<body>
<!-- hhmts start -->
<div class="last-update">最終更新日: <strong>Tue May  7 02:03:55 2002</strong></div>
<!-- hhmts end -->
<hr>
<h1>nile管理ノート(1999年12月5日〜）</h1>
<p>
以前の nile 管理ノート(Solaris 2.6  〜 1999年9月22日 ) は<a href="./adm_note_26.html">こちら</a>。
</p>
<hr>

<ul>
  <li><a href="#20020429">Apacheバージョンアップ</a>
  <li><a href="#20020415">fml アカウントのパスワードをロック</a>
  <li><a href="#20020218">nile お引越</a>
  <li><a href="#20020214">DNSサーバ変更</a>
  <li><a href="#20011128">~g122移動準備</a>
  <li><a href="#20011125">nile ディスクマウントせず</a>
  <li><a href="#20011111">Matlab Webserver</a>
  <li><a href="#20010924">メール関係の設定変更</a>
  <li><a href="#20010924-2">sendmail.cfの設定変更</a>
  <li><a href="#20010924-3">mnewsの設定について</a>
  <li><a href="#20010924-4">fmlの設定変更</a>
  <li><a href="#20010924-5">7_Recommended patch エラー? (106950-14)</a>
  <li><a href="#20010822">MATLAB6のインストール</a>
  <li><a href="#20010624">DDS4 Autoloader の設置</a>
  <li><a href="#20010622">sendamilパッチ（107684-02)バグ？</a>
  <li><a href="#20010613">fml,Python,kconvのインストール</a>
  <li><a href="#20010531">www-student設定</a>
  <li><a href="#20010528">www-studentについて</a>
  <li><a href="#20010527">sshd の変更</a>
  <li><a href="#20010525">二次ディスク(project3:34GB) 接続</a>
  <li><a href="#20010427">mnews1.22PL5インストール</a>
  <li><a href="#20010414">UPS交換</a>
  <li><a href="#20010412">UPS管理ソフト、PowerVisor をver.2 からVer.3 にバージョンアップ</a>
  <li><a href="#20010406">IPアドレス、ネットマスク、ゲートウェイの変更</a>
  <li><a href="#20010331">snmpXdmid</a>
  <li><a href="#20001217">/etc/shadowの変更</a>
  <li><a href="#20001215">Solaris 7 Recommended Patch Cluste</a>
  <li><a href="#20001218">tcp_wrapper インストール</a>
  <li><a href="#20001004">*/man/windex 更新</a>
  <li><a href="#20000925">特別接続開始,パスワードのエージング開始（syslog,inetd.conf変更)</a>
  <li><a href="#20000821">パッチ当てほか</a>
  <li><a href="#20000715">ディスプレイ交換</a>
  <li><a href="#20000610">apache設定</a>
  <li><a href="#20000604">apacheインストール</a>
  <li><a href="#20000514">nile の掃除</a>
  <li><a href="#20000509">CPU とメモリのチェック</a>
  <li><a href="#20000508">ハードエラー発生</a>
  <li><a href="#20000504">nakata-nx削除</a>
  <li><a href="#20000324">使用延長のおしらせ</a>
  <li><a href="#20000323">UPS覚書、コンソール取替え</a>
  <li><a href="#19991205">makeuser変更</a>
</ul>

<!--
/usr/lib/dmi/snmpXdmid を000にする
http://www.securityfocus.com/bid/2417 

chinatsu@nile[198]% ls -l /usr/lib/dmi/snmpXdmid
-rwxr-xr-x   1 root     sys       213268  4月 14日  05:09 /usr/lib/dmi/snmpXdmid*
chinatsu@nile[199]% sudo chmod 000 /usr/lib/dmi/snmpXdmid
Password:
chinatsu@nile[200]% !ls
ls -l /usr/lib/dmi/snmpXdmid
----------   1 root     sys       213268  4月 14日  05:09 /usr/lib/dmi/snmpXdmid

/usr/openwin/bin/Xsunのsuid を落とす
http://www.securityfocus.com/archive/1/175490
chinatsu@nile[16]% ls -l Xsun
-rwxr-sr-x   1 root     root     1947056  2月 14日  15:02 Xsun*
chinatsu@nile[17]% sudo chmod -s /usr/openwin/bin/Xsun
chinatsu@nile[39]% ls -l Xsun
-rwxr-xr-x   1 root     root     1947056  2月 14日  15:02 Xsun*

/usr/openwin/bin/kcms_configure のsuid を落とす
http://www.securityfocus.com/archive/1/175144
chinatsu@nile[30]% ls -l kcms_configure
-rwsr-sr-x   1 root     bin        23360  8月 18日 2000年 kcms_configure*
chinatsu@nile[31]% sudo chmod -s /usr/openwin/bin/kcms_configure
chinatsu@nile[38]% ls -l kcms_configure
-rwxr-xr-x   1 root     bin        23360  8月 18日 2000年 kcms_configure*


/usr/bin/tip のsuid を落とす。
http://www.securityfocus.com/archive/1/171686
chinatsu@nile[34]% ls -l tip
-rws--x--x   1 uucp     bin        56240  8月 18日 2000年 tip*
chinatsu@nile[35]% sudo chmod -s /usr/bin/tip
chinatsu@nile[36]% ls -l tip
-rwx--x--x   1 uucp     bin        56240  8月 18日 2000年 tip*
-->

<hr>

<h2>2002年4月29日（月）</h2>
<dl>
  <dt><a name="20020429">Apacheバージョンアップ</a>
  <dd><p>
      作業手順は以下の通り。
      cf. <a href="../installer/softlist.shtml#Apache.2002-04-29">インストール記録</a>
      </p>

      <ol>
	<li>httpd.conf の退避
	    <pre>
	    % cd /usr/local/apache/conf
	    % diff -u httpd.conf.default httpd.conf &gt; /tmp/httpd.conf.diff
	    % sudo cp httpd.conf httpd.conf.20020427
	    </pre>
	<li>Apache のコンパイル
	    <pre>
	    % tar zxvf ~/src/apache_1.3.24.tar.gz
	    % cd apache_1.3.24
	    % ./configure --enable-module=all --disable-rule=EXPAT
	    % make
	    </pre>

	<li>既存 Apache の停止
	    <pre>
	    % cd /etc/init.d
	    % sudo ./apache stop
	    </pre>

	<li>ログファイルの退避
	    <pre>
	    % cd /usr/local/apache/logs
	    % sudo mv access_log access_log.20020429
	    % sudo gzip -9 access_log.20020429
	    % sudo mv error_log error_log.20020429
	    % sudo gzip -9 error_log.20020429
	    
	    % cd /project/www-student/logs
	    % sudo mv access_log access_log.20020429
	    % sudo gzip -9 access_log.20020429
	    % sudo mv error_log error_log.20020429
	    % sudo gzip -9 error_log.20020429
	    </pre>

	<li>Apache のインストール
	    <pre>
	    % make -n install | less
	    % sudo make install
	    </pre>
	<li>httpd.conf の編集
	    <p>
	    /tmp/httpd.conf.diff を見て、ひとつずつ設定項目を確認しながら編集していく。</p>
	    <pre>
	    % cd /usr/local/apache/conf
	    % sudo cp httpd.conf.default httpd.conf
	    % sudo vi httpd.conf
	    % diff -u httpd.conf.default httpd.conf
--- httpd.conf.default	Mon Apr 29 20:37:02 2002
+++ httpd.conf	Mon Apr 29 20:38:10 2002
@@ -233,7 +233,7 @@
 # Port: The port to which the standalone server listens. For
 # ports &lt; 1023, you will need httpd to be run as root initially.
 #
-Port 8080
+Port 80
 
 #
 # If you wish httpd to run as a different user or group, you must run
@@ -255,7 +255,7 @@
 # e-mailed.  This address appears on some server-generated pages, such
 # as error documents.
 #
-ServerAdmin masao@nile.ulis.ac.jp
+ServerAdmin admin@nile.ulis.ac.jp
 
 #
 # ServerName allows you to set a host name which is sent back to clients for
@@ -314,14 +314,14 @@
 # Note that "MultiViews" must be named *explicitly* --- "Options All"
 # doesn't give it to you.
 #
-    Options Indexes FollowSymLinks MultiViews
+    Options All MultiViews
 
 #
 # This controls which options the .htaccess files in directories can
 # override. Can also be "All", or any combination of "Options", "FileInfo", 
 # "AuthConfig", and "Limit"
 #
-    AllowOverride None
+    AllowOverride All
 
 #
 # Controls who can get stuff from this server.
@@ -342,25 +342,25 @@
 # Control access to UserDir directories.  The following is an example
 # for a site where these directories are restricted to read-only.
 #
-#&lt;Directory /home/*/public_html&gt;
-#    AllowOverride FileInfo AuthConfig Limit
-#    Options MultiViews Indexes SymLinksIfOwnerMatch IncludesNoExec
-#    &lt;Limit GET POST OPTIONS PROPFIND&gt;
-#        Order allow,deny
-#        Allow from all
-#    &lt;/Limit&gt;
-#    &lt;LimitExcept GET POST OPTIONS PROPFIND&gt;
-#        Order deny,allow
-#        Deny from all
-#    &lt;/LimitExcept&gt;
-#&lt;/Directory&gt;
+&lt;Directory /home/*/public_html&gt;
+    AllowOverride All
+    Options All MultiViews
+    &lt;Limit GET POST OPTIONS PROPFIND&gt;
+        Order allow,deny
+        Allow from all
+    &lt;/Limit&gt;
+    &lt;LimitExcept GET POST OPTIONS PROPFIND&gt;
+        Order deny,allow
+        Deny from all
+    &lt;/LimitExcept&gt;
+&lt;/Directory&gt;
 
 #
 # DirectoryIndex: Name of the file or files to use as a pre-written HTML
 # directory index.  Separate multiple entries with spaces.
 #
 &lt;IfModule mod_dir.c&gt;
-    DirectoryIndex index.html
+    DirectoryIndex index.html index.shtml index.cgi
 &lt;/IfModule&gt;
 
 #
@@ -493,7 +493,7 @@
 # If you prefer a single logfile with access, agent, and referer information
 # (Combined Logfile Format) you can use the following directive.
 #
-#CustomLog /usr/local/apache/logs/access_log combined
+CustomLog /usr/local/apache/logs/access_log combined
 
 #
 # Optionally add a line containing the server version and virtual host
@@ -583,6 +583,15 @@
         Allow from all
     &lt;/Directory&gt;
 
+    Alias /matlab/ "/usr/local/matlab/toolbox/webserver/wsdemos/"
+
+    &lt;Directory "/usr/local/matlab/toolbox/webserver/wsdemos/"&gt;
+	AllowOverride All
+	Options All MultiViews
+	Order deny,allow
+	Allow from all
+    &lt;/Directory&gt;
+
 &lt;/IfModule&gt;
 # End of aliases.
 
@@ -762,7 +771,7 @@
     # more or less alphabetized them here. You probably want to change this.
     #
     &lt;IfModule mod_negotiation.c&gt;
-        LanguagePriority en da nl et fr de el it ja kr no pl pt pt-br ru ltz ca es sv tw
+        LanguagePriority ja en da nl et fr de el it kr no pl pt pt-br ru ltz ca es sv tw
     &lt;/IfModule&gt;
 
     #
@@ -781,13 +790,13 @@
     #
     # To use CGI scripts:
     #
-    #AddHandler cgi-script .cgi
+    AddHandler cgi-script .cgi
 
     #
     # To use server-parsed HTML files
     #
-    #AddType text/html .shtml
-    #AddHandler server-parsed .shtml
+    AddType text/html .shtml
+    AddHandler server-parsed .shtml
 
     #
     # Uncomment the following line to enable Apache's send-asis HTTP file
@@ -963,6 +972,7 @@
 # Use name-based virtual hosting.
 #
 #NameVirtualHost *
+NameVirtualHost 133.51.14.8
 
 #
 # VirtualHost example:
@@ -977,3 +987,19 @@
 #    ErrorLog logs/dummy-host.example.com-error_log
 #    CustomLog logs/dummy-host.example.com-access_log common
 #&lt;/VirtualHost&gt;
+
+## Default Server:
+&lt;VirtualHost 133.51.14.8&gt;
+    ServerName nile.ulis.ac.jp
+&lt;/VirtualHost&gt;
+
+## For www-student:
+&lt;VirtualHost 133.51.14.8&gt;
+    ServerName www-student.ulis.ac.jp
+    Include "/project/www-student/conf/httpd.conf"
+&lt;/VirtualHost&gt;
+
+&lt;VirtualHost 133.51.14.8&gt;
+    ServerName www-student
+    Include "/project/www-student/conf/httpd.conf"
+&lt;/VirtualHost&gt;
	    </pre>

	<li>httpd.conf のテスト
	    <pre>
	    % /usr/local/apache/bin/httpd -t
	    % /usr/local/apache/bin/httpd -T
	    % /usr/local/apache/bin/httpd -S
	    </pre>
	<li>Apache の起動
	    <pre>
	    % cd /etc/init.d
	    % sudo ./apache start
	    </pre>
      </ol>
</dl>
<hr>
<h2>2002年4月15日（月）</h2>
<dl>
  <dt><a name="20020415">fml アカウントのパスワードをロック</a>
  <dd>sudo を使えば良いなので、fml アカウントのパスワードをロックしておく。
      <pre>% sudo passwd -l fml</pre>
</dl>

<hr>
<h2>2002年2月18日（月）</h2>
<dl>
  <dt><a name="20020218">nile お引越</a>
  <dd>学内大移動に伴い、nile も研究開発室IIIに引っ越す。IPアドレスなどの変更はなし。
</dl>
<hr>
<h2>2002年2月14日（木）</h2>
<dl>
  <dt><a name="20020214">DNSサーバ変更</a>
  <dd>センターのシステム入れ替えに伴い、
      <code>/etc/resolve.conf</code>のDNSサーバの設定を変更。
      <pre>
      chinatsu@nile[16]%  diff resolv.conf.old resolv.conf
      3,4c3,4
      &lt; nameserver    133.51.168.11
      &lt; nameserver    133.51.168.12
      ---
      &gt; nameserver    133.51.16.242
      &gt; nameserver    133.51.20.242
      7c7
      &lt; nameserver    133.51.60.5
      ---
      &gt; #nameserver   133.51.60.5
      </pre>
</dl>
<hr>
<h2>2001年11月28日（木）</h2>
<dl>
  <dt><a name="20011128">~g122移動準備</a>
  <dd>/home の使用容量が95% になった。
      <p>
      ドクターの発表も近く、ファイル削除の作業などを
      行えないタイミングなので、ファイル容量の多いg122(大懸さん)の
      ホームディレクトリを /home/g122 から /project/g122 への移動
      させておき、/home　の容量が100% に近くなったら /home/g122 を
      削除できるようにしておく。
      </p>

      <pre>
      chinatsu@nile[123]% cd /project
      chinatsu@nile[124]% sudo mkdir g122
      Password:
      chinatsu@nile[125]% sudo chown g122 g122
      chinatsu@nile[126]% ls -l g122
      合計 0
      chinatsu@nile[127]% ls -ld g122
      drwxr-xr-x   2 g122     other        512 11月 28日  12:07 g122/
      chinatsu@nile[128]% sudo chgrp ulis g122
      chinatsu@nile[129]% ls -ld g122
      drwxr-xr-x   2 g122     ulis         512 11月 28日  12:07 g122/
      chinatsu@nile[130]% cd g122
      chinatsu@nile[131]% cd /home/g122
      chinatsu@nile[132]% su
      nile# sudo tar cf - . | (cd /project/g122;tar xpf -)
      </pre>
      
      <p>
      suにならないとtar で移動できなかった。
      ファイルサイズが/home/g122 と/project/g122 で異なるが、
      これは、穴あきのバイナリデータがあるため。
      </p>
</dl>

<hr>
<h2>2001年11月25日（土）</h2>
<dl>
  <dt><a name="20011125">nile ディスクマウントせず</a>
  <dd>nile のvfstab を書き換えてしまい、起動時に /, /var, /usr, /dev/fd のみ
      マウントし、他のものはマウントしない状態になった。
      <a href="./011125.txt">作業などの覚書。</a>
</dl>

<hr>
<h2>2001年11月11日（日）</h2>
<dl>
  <dt><a name="20011111">Matlab Webserver</a>
  <dd>
      <p>インストールと設定が終わったので、ドキュメントを/usr/local/matlab6p1/README_INSTALL_WEBSERVER に作成。詳しくはドキュメントを読んでください。主な変更点は以下のとおり。</p>
      <ul>
	<li>Matlab Webserver のポート番号を27009とする。
	<li>Matlab Webserver 用にapache をインストール(/usr/local/apache_matlab)。
	    ポート番号は8100。
	<li>Matlab 関連の起動ユーザ用にmatlab ユーザを作成。
      </ul>
</dl>

<hr>
<h2><!-- 実際に作業したのは8月15日、でも、タイミングが合わなくて伸びました -->
2001年9月24日（月）</h2>
<dl>
  <dt><a name="20010924">メール関係の設定変更</a>
  <dd><p>
      今までは sendmail.cf で "From: username@ulis.ac.jp"としていたが、
      問題がいくつか出てきたので、sendmail.cf では何もせず
      "From: username@nile.ulis.ac.jp" となるように設定を変更。
      </p>
      <p>
      それに伴い、From行、Reply-to行などは各メーラで設定することとする。
      </p>

  <dt><a name="20010924-2">sendmail.cfの設定変更</a>
  <dd>Anserbook2の"メールシステムの管理：新しい sendmail.cf ファイルを構築する方法"を参考に新しいsendmail.cfを作成。
      <pre>
      # cp main-v7sun.mc test.mc
      #  /usr/ccs/bin/make test.cf
      /usr/bin/mv test.cf test.cf.prev
      mv: test.cf を使用できません。
      *** Error code 2 (ignored)
      /usr/ccs/bin/m4 ../m4/cf.m4 test.mc &gt; test.cf
      </pre>
      <p>
      エラーが出るが問題はないらしいので、test.cf の設定を変更する。
      変更は4点。diff の結果は<a href="./sendmail.log">ここ。</a>
      </p>
      <pre>
      Cwnile
      
      #Fw-o /etc/mail/sendmail.cw
      
      Dj$w.ulis.ac.jp
      
      DSsmtp.ipc.ulis.ac.jp
      </pre>
      <p>
      Fw-oのコメントアウトは怪しいが、問題がないのでOKとする。
      </p>
      <p>
      test.cfを使ってテスト。
      </p>
      <pre>
      # /usr/lib/sendmail -C /usr/lib/mail/cf/test.cf test@nile.ulis.ac.jp &lt; /dev/null
      </pre>
      <p>
      問題なさそうなので今までのsendmail.cf をsendmail.cf.mask とする。<br>
      test.cf を /etc/sendmail.cf にコピーし、sendmail を再起動。<br>
      </p>

      <br>
      <pre>
      # mv /etc/sendmail.cf /etc/sendmail.cf.mask
      # cp test.cf /etc/mail/sendmail.cf
      # pkill -HUP sendmail
      </pre>

  <dt><a name="20010924-3">mnewsの設定について</a>
  <dd>
      <ul>
	<li>From行の設定<br>
	    <p>
	    mnewsでは、インストール時指定したドメイン名が、
	    nile:/usr/local/lib/default-domain に
	    書かれている(nile はもちろんulis.ac.jpである）。<br>
	    mnewsは、default-domainを見て、From行を決めているらしく、
	    設定変更なしで、" From: chinatsu@ulis.ac.jp (Chinatsu Ito)" となった。</p>
	    
	<li>時刻表示について<br>
	    <p>
	    mnews [version 1.22PL5] で、":Date: Wed, 15 Aug 2001 23:46:12 JST"となっており、"+0900 (JST)"がないとの指摘を受ける。
	    いくつかオプションを変えてみたが、変化なし。<br>
	    version 1.22PL1までは "Date: Thu, 16 Aug 2001 01:21:00 +0900 (JST)"と表示されていたのでバージョンのせいかもしれない（としておこう）。
	    </p>
      </ul>
  
  <dt><a name="20010924-4">fmlの設定変更</a>
  <dd><p>
      fmlで、Reply-to を	"@nile.ulis.ac.jp" とするために
      /var/spool/ml/etc/fml/site_init.phを置いていたが、
      sendmail.cfの変更により不要になったので、site_init.ph.old としておく。
      </p>
    
  <dt><a name="20010924-5">7_Recommended patch エラー? (106950-14)</a>
  <dd><p>2001年9月13日付けの Solaris 7 Recommended Patch Clusterをあて、
      reboot したところ、以下のようなメッセージが5秒おきに出る。</p>
      <pre>
      Sep 24 13:12:42 nile cssd: starting kkcv.sh (pid#2694)
      Sep 24 13:12:42 nile cssd: The process "ccv.sh" has been killed by sig#139, core dumped
      Sep 24 13:12:47 nile cssd: starting ccv.sh (pid#2696)
      Sep 24 13:12:47 nile cssd: The process "kkcv.sh" has been killed by sig#139, core dumped
      </pre>

      <p> # file /core をしても、情報が得られないので、 #strings /core | less をしてみると
      </p>
      <pre>
      crt0: no /usr/lib/ld.so
      /usr/ucblib
      </pre>
      などの文字があるのでリンク関係がおかしいと判断し、怪しいものから削除してみる。
      <p>
      最初に、106950-14(Linker patch) を　 #patchrm するとエラーが消えたので、
      とりあえず、様子を見ることにする。
      </p>
</dl>

<hr>
<h2>2001年8月22日（水）</h2>
<dl>
  <dt><a name="20010822">MATLAB6のインストール</a>
  <dd><a href="http://nile/nile/installer/softlist.shtml#MATLAB.2001-08-22">
      インストール記録。</a><br>
      同時にMATLAB Web Server を設定しようとしたが、
      エラーが出てうまくいかない。<a href="#20011111"> 後日行う。</a>
</dl>
<!--
<hr>
2001年8月15日（水）
/project3 をmount して利用開始。
-->

<hr>
<h2>2001年6月24日（日）</h2>
<dl><dt><a name="20010624">DDS4 Autoloader の設置</a>
<dd><p>
    本体をSCSI につないで、boot -r。
    SCSIアドレスを4に設定。/dev/rmt/1 で利用可能。</p>
</dl>
<hr>
<h2>2001年6月22日（金）</h2>
<dl>
  <dt><a name="20010622">sendamilパッチ（107684-02)バグ？</a>
  <dd><p>
      6月19日付けの Solaris 7 Recommended Patch Clusterを
      あてたところ、nile からメールが送信できず。<br>
      どうも、sendmailのパッチ(107684-02)によって sendmail.cfが
      変更されたのが原因のよう。<br>
      107684-02 を削除して、107684-01 にパッチレベルを戻して、
      再起動したところメールの送信は可能となる。<br>

      nile は sendmail.cf の設定をいくつか変更しているので、
      それをきちんと標準（？）に戻してやればパッチがあたるかも。
      </p>
</dl>

<hr>
<h2>2001年6月13日（火）</h2>
<dl>
  <dt><a name="20010613">fml,Python,kconvのインストール</a>
  <dd>
      <ul>
	<li><strong>fml をインストール</strong><br>
	    使い方は<a href="../fml_readme.html">fml の使い方</a>にあり。<br>
	    root の作業も必要なので、同じファイル内にメモ。
	    インストール時の注意点、メモなどは<a href="./fml.log">ここ</a>にあり。

	<li><strong>Python-2.1 のインストール</strong><br>
	    挫折した用途のためにインストール。<br>
	    ソース: http://www.python.org/<br>
	    参考URL: http://www.zob.ne.jp/~hide-t/comp/python/<br>
	    インストール先：/usr/local/lib/python2.1<br>
	    /usr/local/bin/python2.1<br>
	    /usr/local/bin/python<br>
	    ログとり忘れましたが、特別な設定はしてません。<br>

	<li><strong>kconv-1.1.7 のインストール</strong><br>
	    Pythonの日本語文字コード変換モジュール<br>
	    ソース：http://www.eccosys.co.jp/~mak/kconv/index_jp.html<br>
	    kconv-1.1.7p.tar.gz<br>
	    c++ 版はエラーが出てmake できないので python版にしました。<br>
	    p版の方が遅いので必要ならば c++版にした方がいいかも。<br>
	    
	    %python compile.py optimize<br>
	    % cd kconv<br>
	    %sudo cp -R kconv /usr/local/lib/python2.1/site-packages/
      </ul>
</dl>

<hr>
<h2>2001年5月31日（木）</h2>
<dl>
  <dt><a name="20010531">www-student設定</a>
  <dd>高久くんがwww-student の設定を行ってくれた。
      センターへの提出書類は黄色いファイルにあり。
      <pre>
      たかくです。
      
      先ほど、nile で
      学生サーバを立ち上げるのに必要な設定の変更および
      センターへの書類の提出を行いました。
      
      設定内容は、
      ・/etc/hosts の修正
      ・ホスト名別名 www-student の追加。
      ・/usr/local/apache/conf/httpd.conf の修正
      ・バーチャルホスト設定の追加
      ・メンバ（k248,j133）のユーザ登録
      です。
      
      ディスクスペースとしては、とりあえず /project/www-student
      を割り当てています。
      </pre>
</dl>

<hr>
<h2>2001年5月28日（月）</h2>
<dl>
  <dt><a name="20010528">www-studentについて</a>
  <dd>cosmo 故障につき、www-studentを cosmo 復旧までの間、nile に移行することが決定。実作業は高久くんが行う。
</dl>

<!--DDS4 オートローダを宇陀先生のところからもらってくる -->
<hr>
<h2>2001年5月27日（日）</h2>
<dl>
  <dt><a name="20010527">sshd の変更</a>
  <dd><p>
      ssh でログインするとメールが来ていても "No mail" とメッセージがでるとの指摘あり。原因は、sshd が MAIL 環境変数の設定をミスっていることのようです。
      </p>
      <pre>
      masao writes:

      　sshd はコンパイル時にシステムの
      　メールスプールを決定するのですが、これを探す順序が
      　　/var/spool/mail /var/mail /usr/spool/mail /usr/mail
      　となっており、運の悪いこと(?)になぜか nile には
      　スプールには関係のない /var/spool/mail ディレクトリが実在するため、
      　こちらをデフォルトのメールスプールとしてしまうようです。
      </pre>

      <p>そこで、configure:6120行目</p>
      <pre>
      for dir in /var/spool/mail /var/mail /usr/spool/mail /usr/mail FILE
      </pre>

      を
      <pre>
      for dir in /var/mail /var/spool/mail /usr/spool/mail /usr/mail FILE
      </pre>
      と探索順を変更。改めて、make しインストール、sshd を再起動する。

      <p>
      sshd が/var/mail をチェックするようになると、
      </p>
      <pre>
      chinatsu@dream[4]% slogin nile
      chinatsu@nile's password: 
      Last login: Sun May 27 19:52:42 2001 from dream
      You have new mail.
      Sun Microsystems Inc.   SunOS 5.7       Generic October 1998
      You have new mail.
      </pre>
      <p>
      とメールのチェックが2回されるようになったので、
      /etc/sshd_config の PrintMotd および CheckMail を
      </p>
      <pre>
      PrintMotd no
      CheckMail no
      </pre>
      に変更、sshdを再起動する。
</dl>

<hr>
<h2>2001年5月25日（金）</h2>
<dl>
  <dt><a name="20010525">二次ディスク(project3:34GB) 接続</a>
  <dd><p>
      ディスクの接続は 「オンラインマニュアルSolarisのシステム管理(第1巻）
      ディスクの管理 第23章 SPARC: ディスク追加の手順 」を参考にして行う
      （コピーは黄色のファイルに保存）。ディスクスライス、ラベル、
      ファイルシステムの作成は
      「Solarisシステム管理入門 2nd Edition 3.4 ディスクの管理(p.121- )」
      も参考にする。
      ディスクの命名規則は、Solarisシステム管理入門が分かりやすい。
      </p>
      <ul>
	<li><strong>ディスクの取り付け</strong>
	    <p>root になる。</p>
	    <pre>
	    # touch /reconfigure
	    # /usr/sbin/shutdown -i0 -g0 -y
	    </pre>
	    電源を切り、コンセントを抜く。<br>
	    取り付けはnile の本体のところに置いてある説明書の手順で行う。<br>
	    取り付け完了後、boot	

	<li><strong>ディスクスライス、ラベルの作成 </strong>　<a href="./project3.log">ログファイル</a>
	    <ol>
	      <li>root になってフォーマット開始。
		  <pre>root@nile[3]% format</pre>

	      <li> 表示されたリストの中からフォーマットしたいディスクの番号を入力。
		  <pre>
		  Specify disk (enter its number): 6
		  </pre>

	      <li>パーティションメニューへ
		  <pre>
		  format&gt; partition
		  </pre>

	      <li>パーティションテーブルを表示。<br>
		  <pre>
		  partition&gt; print
		  </pre>

	      <li> 変更作業開始。
		  <pre>
		  partition&gt; modify
		  </pre>

	      <li>Free Hog を選択
		  <pre>
		  Select partitioning base:
		  0. Current partition table (original)
		  1. All Free Hog
		  Choose base (enter number) [0]? 1
		  </pre>
		  
	      <li>続行を選択し、スライスを設定。<br>
		  スライス番号は 「Solarisシステム管理入門 2nd Edition p.125」参照のこと
		  <pre>
		  Do you wish to continue creating a new partition
		  table based on above table[yes]? y
		  Free Hog partition[6]? 7
		  </pre>
		  
	      <li>表示されたパーティションを選択し、パーティションのテーブルに名前つける。名前は""で囲んで入力<br>
		  <pre>
		  Okay to make this the current partition table[yes]? y
		  Enter table name (remember quotes): "project3"
		  </pre>

	      <li>パーティションメニューをぬけ、ディスクラベルを確認。その後フォーマットを終了する。
		  <pre>
		  Ready to label disk, continue? y
		  partition&gt; q
		  format&gt; verify
		  format&gt; q
		  </pre>
	    </ol>
	    
	<li><strong>ファイルシステムの作成</strong>
	    <pre>
	    root@nile[10]% newfs /dev/rdsk/c0t12d0s7
	    </pre>
	    ディスク命名規則は 「Solarisシステム管理入門 2nd Edition p.121」参照のこと

	<li><strong>マウント</strong>
	    <pre>
	    root@nile[11]% mkdir /project3
	    root@nile[12]% mount /dev/dsk/c0t12d0s7 /project3
	    root@nile[13]% mount -p &gt; /etc/vfstab
	    </pre>
      </ul>
</dl>

<!-- 5月24日 DDS4 のオートローダー到着 -->	

<hr>
<h2>2001年4月27日（金）</h2>
<dl>
  <dt><a name="20010427">mnews1.22PL5インストール</a>
  <dd>mnews1.21PL5を1.22PL5にバージョンアップ <a href="./mnews122.log">ログ</a>
      
      <br><strong>変更点:</strong><br>
      <ul>
	<li>アーキテクチャ番号:13
	    <pre>
	    13.SVR4   for other System-V Release4.
	    NEC EWS4800(EWS UX/V Rel4.X), UP4800(UP-UX/V)
	    OKIstation, SUN SUN-OS 5.X(Solaris 2.X)...
	    </pre>
	<li>JPEG ビューアーとオプション(デフォルト:xv): display
	    
	<li>GIF ビューアーとオプション(デフォルト:xv): display
	    
	<li>コンフィグレーションオプション:
	    <pre>-DCTRL_L -DCOMPLETION -DREF_SORT -DLARGE -DDISPLAY_CTRL -DBUILTIN_MMH -DCOLOR</pre>
	    
	<li>ドメイン名: ulis.ac.jp
	    
	<li>印刷コマンドとオプション(デフォルト:lpr): lp
	    
	<li>コンパイラ(デフォルト:/bin/cc): /opt/SUNWspro/bin/cc
      </ul>
</dl>

<hr>
<h2>2001年4月14日（土）</h2>
<dl>
  <dt><a name="20010414">UPS交換</a>
  <dd>UPS本体を交換する。nile とUPS 間をつなぐRC232C のケーブルは以前のUPS に
      付属していたものを利用。UPS の電源を抜き、停電のテストをする。復電しても 
      nile が起動しないことを確認。
</dl>

<hr>
<h2>2001年4月12日（木）</h2>
<dl>
  <dt><a name="20010412">UPS管理ソフト、PowerVisor をver.2 からVer.3 にバージョンアップ</a>
  <dd><ol>
    <li><strong>rootになって、以前のバージョンをアンインストール</strong>
	<pre>
	# /usr/local/ups/bin/CLEANUP
	</pre>
	そのままCLEANUP を実行すると /etc/syslog が変更されるので、実行前に
	スクリプトを確認する必要がある。

    <li><strong>Ver.3 のインストール。</strong>
	<p>
	XINSTALL(xinst)でインストールするより、cinst でインストールおよび設定変更を
	するほうが確実である(XINSTALL だと設定できてない部分があった）。
	<p>設定は /usr/local/ups/lib/upstab にあり。</p>
	<pre>
	ttyname: /dev/ttyb
	upslog: /var/adm/upslog
	autoreboot: off
	</pre>
	の設定がデフォルトとは異なっている。
	autoreboot をoff にしておかないと復電時に起動してしまうので注意。

	<p>
	upsのオンライン版のマニュアルは<a href="./ups_manual/index.htm">ここ（UNIX版のみ）</a>。</p>
  </ol>
</dl>

<hr>
<h2>2001年4月6日（金）</h2>
<dl>
  <dt><a name="20010406">IPアドレス、ネットマスク、ゲートウェイの変更</a>
  <dd><pre>
      ギガビット導入によりnile のIPアドレス、ネットマスク、ゲートウェイを変更する。
      学内のほぼ全てのホスト、プリンタなどがIPアドレス変更となるので、適宜変更する。

      下準備）
      sendmailを止める
      # /etc/init.d/sendmail stop

      nile をシングルユーザモードにする。
      # /usr/sbin/shutdown -y -g0 -i0
      # init s
      
      作業）
      ・変更サブネットマスク255.255.252.0 から 255.255.255.0 に変更
      /etc/netmask
      # Both the network-number and the netmasks are specified in
      # "decimal dot" notation, e.g:
      #
      #               128.32.0.0 255.255.255.0
      #
      133.51.0.0      255.255.255.0
      </pre>
      <p><strong>ホストのIP アドレスを変更</strong></p>
      <pre>
      /etc/hosts
      nile のところを 133.51.14.8 に変更
      
      他のホスト、プリンタなどはコメントアウトしておき、安定して稼動したら
      設定する。
      </pre>

      <p><strong>デフォルトルータの設定</strong></p>
      <pre>
      /etc/defaultrouter を作成。
      ゲートウェイアドレスのアドレス 133.51.14.254 とだけ記述。
      
      今回の変更で /etc/defaultrouter なしでは サブネットが14 以外のホストと
      接続できなかったため作成。
      
      # init 6 または boot
      リブート後、ifconfig -a で確認。
      </pre>
</dl>

<hr>
<h2>2001年3月31日（土）</h2>
<dl>
  <dt><a name="20010331">snmpXdmid</a>
  <dd>CERT のAdvisory により Soralis7 のsnmpXdmid はオーバーフローが置き、
      root 権限が取られるとわかる。Sun でパッチがでていないので、Advisory に
      書いてある対処法を実施。
      
      <pre>
      chinatsu@nile[1]% ls -l ./rc*?.d/* |grep dmi
      -rwxr--r--   6 root     sys          861  9月  1日 1998年 ./rc0.d/K07dmi*
      -rwxr--r--   6 root     sys          861  9月  1日 1998年 ./rc1.d/K07dmi*
      -rwxr--r--   6 root     sys          861  9月  1日 1998年 ./rc2.d/K07dmi*
      -rwxr--r--   6 root     sys          861  9月  1日 1998年 ./rc3.d/S77dmi*
      -rwxr--r--   6 root     sys          861  9月  1日 1998年 ./rcS.d/K07dmi*
      chinatsu@nile[3]% sudo mv /etc/rc3.d/S77dmi /etc/rc3.d/K77dmi
      Password:
      chinatsu@nile[6]% sudo /etc/init.d/init.dmi stop
      chinatsu@nile[7]% ps -aef |grep dmi
      chinatsu 17670 17628  0 17:02:54 pts/7    0:00 grep dmi
      chinatsu@nile[8]% ls -l /usr/lib/dmi/snmpXdmid
      -rwxr-xr-x   1 root     sys       213096 11月  3日  15:07 /usr/lib/dmi/snmpXdmid*
      chinatsu@nile[11]% sudo chmod 000 /usr/lib/dmi/snmpXdmid
      chinatsu@nile[12]% ls -l /usr/lib/dmi/snmpXdmid
      ----------   1 root     sys       213096 11月  3日  15:07 /usr/lib/dmi/snmpXdmid
      </pre>
</dl>
<!-- 20010322 nile のUPS を宇陀先生の部屋からもらってくる -->

<hr>
<h2>2000年12月17日（日）</h2>
<dl>
  <dt><a name="20001217">/etc/shadowの変更</a>
  <dd>/etc/shadow の中にあった NP をLK にする。
      今回 LK に変更したものは以下のものである。
      daemon, bin, sys, adm, lp, uucp, nuucp, listen, nobody
      noaccess, totalnet, nobody4, 
</dl>

<hr>
<h2>2000年12月15日（金）</h2>
<dl>
  <dt><a name="20001215">Solaris 7 Recommended Patch Cluste</a>
  <dd>Solaris 7 Recommended Patch Cluster (Nov/02/00) をあてる。
      ログは nile:/var/sadm/install_data/Solaris_7_Recommended_log  にあり。
</dl>

<hr>
<h2>2000年12月8日（金）</h2>
<dl>
  <dt><a name="20001218">tcp_wrapper インストール</a>
  <dd>/etc/inet/inetd.conf を書き換える。
      が、sshd をtcp_wrapper 対応にしなければいけないので、
      もとにもどして、設定をべつにする。
</dl>

<hr>
<h2>2000年10月4日(水）</h2>
<dl>
  <dt><a name="20001004">*/man/windex 更新</a>
  <dd><pre>
      nile# setenv LANG ja
      nile# catman -w 
      nile# setenv LANG C
      nile# catman -w 
      </pre>
      catman -w  を行う時には MANPATHに windex を作成したい manのディレクトリを指定する。
      言語が ja の時は */man/ja のwindex が、C の時は */man のwindex が作成される。
</dl>

<hr>
<h2>2000年9月25日（月）</h2>
<dl>
  <dt><a name="20000925">特別接続開始,パスワードのエージング開始（syslog,inetd.conf変更)</a>
  <dd><ol>
	<li><strong>nile 特別接続開始。</strong>
	<li><strong>パスワードのエージング開始。</strong>
	    <ul>
	      <li>/etc/default/passwd の設定変更<br>
		  これにより passwd をすると設定された値が適応される。
		  <pre>
		  diff passwd.org passwd
		  2,3c2,1	2
		  &lt; MAXWEEKS=
		  &lt; MINWEEKS=
		  ---
		  &gt; #
		  &gt; # 特別接続するにあたり、パスワードのエジングをかける。
		  &gt; # 2000.09.25 より実施
		  &gt; # MAXWEEKS  パスワードが有効な最大期間
		  &gt; # MINWEEKS  パスワード変更に最低限必要な期間
		  &gt; # WARNWEEKS パスワードの有効期間が切れる前の警告期間
		  &gt; # PASSLENGTH パスワードに最低限必要な文字数
		  &gt; #
		  &gt; MAXWEEKS=17
		  &gt; MINWEEKS=2
		  &gt; WARNWEEKS=4
		  </pre>

	      <li>現行ユーザのパスワードの有効期間変更
		  <br>
		  <pre>
		  nile#	passwd -n 14 -w 28 -x 119 ユーザ名
		  -n: Min の設定（日数）
		  -w: Warn の設定（日数）
		  -x: Max の設定（日数）
		  </pre>
		  　により変更。
	    </ul>
	<li><strong>syslog.conf変更</strong><br>
	    特別接続をするにあたり、nile のログをいままでより細かくとれるように
	    syslog.confを書き換える。<br>
	    <pre>
	    chinatsu@nile[29]% diff syslog.conf.org syslog.conf
	    12c12,14
	    &lt; *.err;kern.debug;daemon.notice;mail.crit      /var/adm/messages
	    ---
	    &gt; *.err;kern.debug;daemon.notice;daemon.debug;mail.crit /var/adm/messages
	    &gt; daemon.notice;daemon.debug;                           /var/log/syslog
	    &gt; #*.err;kern.debug;daemon.notice;mail.crit     /var/adm/messages
	    18a21,28
	    &gt; # sshd SyslogFacility code is LOCAL3
	    &gt; local3.debug                          /var/adm/messages
	    &gt; local3.debug                          /var/log/syslog
	    &gt; 
	    37,41c47,51
	    &lt; daemon.notice                 /dev/sysmsg
	    &lt; daemon.notice                 /nsr/logs/messages
	    &lt; daemon.notice                 operator
	    &lt; local0.notice                 /nsr/logs/summary
	    &lt; local0.alert                  root, operator
	    ---
	    &gt; #daemon.notice                        /dev/sysmsg
	    &gt; #daemon.notice                        /nsr/logs/messages
	    &gt; #daemon.notice                        operator
	    &gt; #local0.notice                        /nsr/logs/summary
	    &gt; #local0.alert                 root, operator
	    </pre>
	    
	    
	<li><strong>inetd.conf変更</strong><br>
	    
	    <pre>
	    diff inetd.conf.org inetd.conf
	    19c19
	    &lt; ftp   stream  tcp     nowait  root    /usr/sbin/in.ftpd       in.ftpd
	    ---
	    &gt; ftp   stream  tcp     nowait  root    /usr/sbin/in.ftpd       in.ftpd -l
	    30c30
	    &lt; exec  stream  tcp     nowait  root    /usr/sbin/in.rexecd     in.rexecd
	    ---
	    &gt; #exec stream  tcp     nowait  root    /usr/sbin/in.rexecd     in.rexecd
	    36c36
	    &lt; uucp  stream  tcp     nowait  root    /usr/sbin/in.uucpd      in.uucpd
	    ---
	    &gt; #uucp stream  tcp     nowait  root    /usr/sbin/in.uucpd      in.uucpd
	    58,65c58,65
	    &lt; echo  stream  tcp     nowait  root    internal
	    &lt; echo  dgram   udp     wait    root    internal
	    &lt; discard       stream  tcp     nowait  root    internal
	    &lt; discard       dgram   udp     wait    root    internal
	    &lt; daytime       stream  tcp     nowait  root    internal
	    &lt; daytime       dgram   udp     wait    root    internal
	    &lt; chargen       stream  tcp     nowait  root    internal
	    &lt; chargen       dgram   udp     wait    root    internal
	    ---
	    &gt; #echo stream  tcp     nowait  root    internal
	    &gt; #echo dgram   udp     wait    root    internal
	    &gt; #discard      stream  tcp     nowait  root    internal
	    &gt; #discard      dgram   udp     wait    root    internal
	    &gt; #daytime      stream  tcp     nowait  root    internal
	    &gt; #daytime      dgram   udp     wait    root    internal
	    &gt; #chargen      stream  tcp     nowait  root    internal
	    &gt; #chargen      dgram   udp     wait    root    internal
	    93c93
	    &lt; rusersd/2-3   tli     rpc/datagram_v,circuit_v        wait root /usr/lib/netsvc/rusers/rpc.rusersd    rpc.rusersd
	    ---
	    &gt; #rusersd/2-3  tli     rpc/datagram_v,circuit_v        wait root /usr/lib/netsvc/rusers/rpc.rusersd    rpc.rusersd
	    97c97
	    &lt; sprayd/1      tli     rpc/datagram_v  wait root /usr/lib/netsvc/spray/rpc.sprayd      rpc.sprayd
            ---
            &gt; #sprayd/1     tli     rpc/datagram_v  wait root /usr/lib/netsvc/spray/rpc.sprayd      rpc.sprayd
            101c101
	    &lt; walld/1               tli     rpc/datagram_v  wait root /usr/lib/netsvc/rwall/rpc.rwalld      rpc.rwalld
            ---
            &gt; #walld/1              tli     rpc/datagram_v  wait root /usr/lib/netsvc/rwall/rpc.rwalld      rpc.rwalld
</pre>
</ol>
</dl>

<hr>
<h2>2000年8月21日（月）</h2>
<dl>
  <dt><a name="20000821">パッチ当てほか</a>
  <dd>
      1) パッチ当て日。作業終了後 reboot 。<br>
      2) / の下にあった error_log 削除。
</dl>

<hr>
<h2>2000年 7月15日（土）</h2>
<dl>
  <dt><a name="20000715">ディスプレイ交換</a>
  <dd>seine ハードディスクを認識しなくなり、活動停止。<br>
      そこで、seine のグラフィックカードをnile に移植し、seine のディスプレイを
      nile で使うこととする。借りていたJ3100 は返却。

      <p><strong>手順:</strong></p>
      <ol>
	<li> nile 電源停止。
	<li> 裏側向かって右から2番目のスロットを抜く。
	<li> seine から抜いたグラフィックカードを指定の場所にさす。
	<li> 本体にスロットを戻す。
	<li> 再起動 (boot -r) <br>
	    -r は新規にデバイスを接続した時に使用。<br>
	    システムのコンフィギュレーションを自動的に行ってくれる。<br>
	    デバイスの増設・取り外し時に1度行えばよい。<br>
	    → see solaris2.5.1 システム管理入門 p.51<br>
      </ol>
</dl>

<hr>
<h2>2000年6月10日(土)</h2>
<dl>
  <dt><a name="20000610">apache設定</a>
  <dd>apacheの設定終了。
      今まで動いていたSun WebServer は停止させ、apache をポート80で動かす 。  
      /usr/local/apache/conf のhttpd.conf　を編集。<br>
      cosmo のhttpd.conf を参考にする。<br>
      <pre>
      chinatsu@nile[10]%diff httpd.conf.default httpd.conf
      238c238,239
      &lt; Port 8080
      ---
      &gt; #Port 8080
      &gt; Port 80
      315c316,317
      &lt;     Options Indexes FollowSymLinks MultiViews
      ---
      &gt;     #Options Indexes FollowSymLinks MultiViews
      &gt;     Options MultiViews All
      322c324,325
      &lt;     AllowOverride None
      ---
      &gt;     #AllowOverride None
      &gt;     AllowOverride All
      343c346
      &lt; #&lt;Directory /home/*/public_html&gt;
      ---
      &gt; &lt;Directory /home/*/public_html&gt;
      345,354c348,358
      &lt; #    Options MultiViews Indexes SymLinksIfOwnerMatch IncludesNoExec
      &lt; #    &lt;Limit GET POST OPTIONS PROPFIND&gt;
      &lt; #        Order allow,deny
      &lt; #        Allow from all
      &lt; #    &lt;/Limit&gt;
      &lt; #    &lt;LimitExcept GET POST OPTIONS PROPFIND&gt;
      &lt; #        Order deny,allow
      &lt; #        Deny from all
      &lt; #    &lt;/LimitExcept&gt;
      &lt; #&lt;/Directory&gt;
      ---
      &gt;     AllowOverride All
      &gt;     Options MultiViews All
      &gt;     &lt;Limit GET POST OPTIONS PROPFIND&gt;
      &gt;         Order allow,deny
      &gt;         Allow from all
      &gt;     &lt;/Limit&gt;
      &gt;     &lt;LimitExcept GET POST OPTIONS PROPFIND&gt;
      &gt;         Order deny,allow
      &gt;         Deny from all
      &gt;     &lt;/LimitExcept&gt;
      &gt; &lt;/Directory&gt;
      361c365,366
      &lt;     DirectoryIndex index.html
      ---
      &gt;     #DirectoryIndex index.html
      &gt;     DirectoryIndex index.html index.shtml
      493a499
      &gt; #CustomLog /usr/local/apache/logs/access_log combined
      705c711,712
      &lt;         LanguagePriority en da nl et fr de el it ja pl pt pt-br ltz ca es sv
      ---
      &gt;         #LanguagePriority en da nl et fr de el it ja pl pt pt-br ltz ca es sv
      &gt;         LanguagePriority ja en da nl et fr de el it pl pt pt-br ltz ca es sv
      735c742
      &lt;     #AddHandler cgi-script .cgi
      ---
      &gt;     AddHandler cgi-script .cgi
      740,741c747,748
      &lt;     #AddType text/html .shtml
      &lt;     #AddHandler server-parsed .shtml
      ---
      &gt;     AddType text/html .shtml
      &gt;     AddHandler server-parsed .shtml
</pre>
</dl>

<hr>
<h2>2000年6月4日(日)</h2>
<dl>
  <dt><a name="20000604">apacheインストール</a>
  <dd>nile のWeb サーバ(Sun Web Server) の設定がおかしいことに気づいたが、直すのが難しそうなので、Apache(1.3.12) をインストールした。
      port 番号は8080 とする。
    
      <p><strong>apache のインストール:</strong><br>
      http://japache.infoscience.co.jp/apache/dist/　から
      apache_1.3.12.tar.gzをダウンロード
      </p>
      <ol>
	<li> 解凍<br>
	    <pre>
		  chinatsu@nile[8]% gunzip apache_1.3.12.tar.gz |tar xvf
		  chinatsu@nile[9]% tar xvf apache_1.3.12.tar
		  chinatsu@nile[38]% ./configure --prefix=/usr/local/apache
		  </pre>
	  
	      <li>コンパイル<br>
	  
		  <pre>
		  chinatsu@nile[39]% make
		  </pre>
	  

	      <li>インストール<br>
		  
		  <pre>
		  chinatsu@nile[1]% su
		  Password:
		  # csh
		  nile# pwd
	  /home/chinatsu/src/apache_1.3.12
		  nile# make install
		  </pre>
		  

      <li>設定<br>
	  /usr/local/apache/conf のhttpd.conf　を編集 
    </ol>
</dl>

<hr>
<h2>2000年5月14日(日)</h2>
<dl>
  <dt><a name="20000514">nile の掃除</a>
  <dd>一分ほどの停電あり。雷雨のためらしい。nile をシャットダウンする。
      ついでに、nile の掃除をする。ファンのところはほとんど汚れていなかったが、
      cpuボードには結構埃がたまっていた。1年に一度は掃除をしたほうがよさそうだ。
</dl>

<hr>
<h2>2000年5月9日(火)</h2>
<dl>
  <dt><a name="20000509">CPU とメモリのチェック</a>
  <dd>SunVTS というシステム診断のためのソフトウェアでCPU とメモリのチェックをしてみる。
      特に異状はないようだ。
      阪口先生曰く「送風口などに埃がたまっているのはないか」とのこと。
      折をみて掃除をすることにする。
</dl>

<hr>
<h2>2000年5月8日(月)</h2>
<dl>
  <dt><a name="20000508">ハードエラー発生</a>
  <dd>22時半ごろ /var/adm/message を見ると、2000/5/5 よりエラーが出ていることに気づく。
      ＃前に見たのは 5月4日だと思う。

      <pre>
    May  3 00:07:40 nile root: Solstice Backup Registration: 
    (info) License enabler #none (NetWorker/10 Eval) has expired.
    May  4 00:06:32 nile root: Solstice Backup Registration: 
    (info) License enabler #none (NetWorker/10 Eval) has expired.
    May  5 00:01:06 nile root: Solstice Backup Registration: 
    (info) License enabler #none (NetWorker/10 Eval) has expired.
    ------------------↓ここからエラーが出始める-----------------
    May  5 00:49:16 nile unix: Multiple Softerrors: 
    May  5 00:49:16 nile unix: 0 Intermittent and 6 Corrected Softerrors accumulated 
    May  5 00:49:16 nile unix: from Memory Module Board 3 J3501
    May  5 00:49:16 nile unix:      Enabling verbose CE messages.
    May  5 00:49:16 nile unix: Softerror: Persistent ECC Memory Error
    May  5 00:49:16 nile unix:  Corrected MemMod Board 3 J3501
    May  5 00:49:16 nile unix:      ECC Data Bit 27 was corrected
    May  5 00:49:46 nile unix: CPU7 CE Error: 
    AFSR 0x00000000.00100000 AFAR 0x00000000.1cc3ee78 UDBL MemMod Board 3 J3501
    May  5 00:49:46 nile unix:      Syndrome 0x54 Size 3 Offset 0 UPA MID 7
    May  5 00:49:46 nile unix: Softerror: Persistent ECC Memory Error
    May  5 00:49:46 nile unix:  Corrected MemMod Board 3 J3501
    May  5 00:49:46 nile unix:      ECC Data Bit 27 was corrected
    May  5 00:50:16 nile unix: CPU7 CE Error: 
    AFSR 0x00000000.00100000 AFAR 0x00000000.1cc3ee78 UDBL MemMod Board 3 J3501
    
    と30秒おきに続き

    May  8 16:53:11 nile unix: CPU7 CE Error: 
    AFSR 0x00000000.00100000 AFAR 0x00000000.1cc3ee78 UDBL MemMod Board 3 J3501
    May  8 16:53:11 nile unix:      Syndrome 0x54 Size 3 Offset 0 UPA MID 7
    May  8 16:53:11 nile unix: Softerror: Persistent ECC Memory Error
    May  8 16:53:11 nile unix:  Corrected MemMod Board 3 J3501
    May  8 16:53:11 nile unix:      ECC Data Bit 27 was corrected
    8日の16:53:11 のメッセージを境に消える。
</pre>

どうも、ハードのエラー（CPU or メモリ）のようです。
順番が逆かもしれないが、とりあえず、/home, /project  のバックアップをとることにする。
必要なバックアップがどれてから、システムのチェックをする。
</dl>

<hr>
<h2>2000年5月4日（木)</h2>
<dl>
  <dt><a name="20000504">nakata-nx削除</a>
  <dd>nakata-nxを削除。
</dl>

<hr>
<h2>2000年3月24日（金)</h2>
<dl>
  <dt><a name="20000324">使用延長のおしらせ</a>
  <dd>今年卒業予定の人にアカウントをどうするかをメールで聞く。
      延長して欲しいという人が2名。あとは延長しなくてもよいのだろう。
</dl>

<hr>
<h2>2000年3月23日（木)</h2>
<dl>
  <dt><a name="20000323">UPS覚書、コンソール取替え</a>
  <dd><strong>UPSメモ</strong><br>
      UPS がそろそろ寿命とのこと(平成10年7月から使用）。
      製造元のGSEE社のホームページ(http://www.gsee.co.jp) で同機種の価格などを見たので覚書。
    
      <pre>
      PICO2-1200
    バッテリー交換(２年〜６年)　59,000円
    本体                            194,000円
    （本体は6年ぐらいで交換するのが望ましいそうだ）
    日眞電器(http://www.nisshindenki.co.jp/) では14万円ぐらいでした。
    </pre>
  <dd><strong>nile のコンソールを取り替える</strong><br>
      nile のコンソールを変更する。ラップトップは阪口先生から借りたもの。
    チェーンは宇陀先生から借用。
    ラップトップのふたを閉めておくと、ディスプレイの電源はoff になりますが、
    本体は動いています。普段は、閉めたままにしておくほうが良いと思います。
</dl>

<hr>
<h2>1999年12月5日（日）</h2>
<dl>
  <dt><a name="19991205">makeuser変更</a>
  <dd>makeuser の NIS に関係するものを消して、nileのみのユーザ登録用に書き換える。
      NIS 用のmakeuser は makeuser.nis として保存。
      また、ユーザへのメッセージ、管理者へのメッセージも一部書き換える。
</dl>

<hr>
<a href="../admin.html">nile 管理者用ページ</a>
</body>
</html>
